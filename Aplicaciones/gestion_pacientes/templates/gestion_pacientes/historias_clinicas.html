{% extends "plantilla_registro_cita.html" %}
{% load static %}
{% block title %}
GESTIÓN PACIENTES
{% endblock %}
{% block content %}
<div class="container mt-4">
    <h2 class="text-center mb-4">Historiales Clínicos</h2>
    <table id="tabla_historias" class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>APELLIDO PATERNO</th>
                <th>APELLIDO MATERNO</th>
                <th>NOMBRES</th>
                <th>FECHA DE ATENCIÓN</th>
                <th>HORA DE ATENCIÓN</th>
                <th>ACCIONES</th>
            </tr>
        </thead>
        <tbody>
            {% for historia in historias %}
            <tr>
                <td>{{ historia.fk_id_cita.fk_id_paciente.apellido_paterno_pacientes }}</td>
                <td>{{ historia.fk_id_cita.fk_id_paciente.apellido_materno_pacientes }}</td>
                <td>{{ historia.fk_id_cita.fk_id_paciente.nombres_pacientes }}</td>
                <td>{{ historia.fecha_atencion_historial }}</td>
                <td>{{ historia.hora_atencion_historial }}</td>
                <td>
                    <a href="{% url 'gestion_pacientes:ver_historial_clinico' id_paciente=historia.fk_id_cita.fk_id_paciente.id_pacientes %}" class="btn btn-primary btn-sm">
                        <i class="fas fa-eye"></i>
                    </a>
                    
                    
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
<script src="{% static 'js/datatables.min.js' %}"></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        $('#tabla_historias').DataTable();
    });
</script>
{% endblock %}
